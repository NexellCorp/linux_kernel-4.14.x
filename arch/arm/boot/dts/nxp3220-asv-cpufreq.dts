// SPDX-License-Identifier: (GPL-2.0+ OR MIT)
/*
 * Copyright (C) 2018  Nexell Co., Ltd.
 * Author: JungHyun, Kim <jhkim@nexell.co.kr>
 */

/dts-v1/;
#include <dt-bindings/gpio/gpio.h>
#include "nxp3220.dtsi"

#define PMIC_PDATA_INIT(_id, _rname, _minuv,		\
                        _maxuv, _init_uv, _init_enable,	\
                        _set_init_uV, _slp_slots)	\
                regulator-name = _rname;                \
                regulator-min-microvolt = <_minuv>;     \
                regulator-max-microvolt = <_maxuv>;     \
                nx,id = <_id>;                          \
                nx,init_enable = <_init_enable>;        \
                nx,init_uV = <_init_uv>;                \
                nx,set_init_uV = <_set_init_uV>;        \
                nx,sleep_slots = <_slp_slots>;

/ {
	model = "Nexell nxp3220 validation test board";
	compatible = "nexell,nxp3220-vtk", "nexell,nxp3220";

	chosen {
		stdout-path = &uart2;
	};

	memory@40000000 {
		device_type = "memory";
		reg = <0x40000000 0x20000000>;
	};

	thermal-zones {
		cpu_thermal: cpu-thermal {
			thermal-sensors = <&tmuctrl_0>;
			polling-delay-passive = <1000>;
			polling-delay = <1000>;
			trips {
				cpu-crit-0 {
					temperature = <85000>;
					hysteresis = <10000>;
					type = "critical";
				};
			};
		};
	};
};

&dwc2otg {
	status = "okay";
	pinctrl-0 = <&otg_vbus_en>;
	pinctrl-names = "default";
};

&ehci {
	status = "okay";
};

&ohci {
	status = "okay";
};

&tmuctrl_0 {
	status = "okay";
};

&uart0 {
	status = "okay";
};

&uart2 {
	status = "okay";
};

&usb2phy {
	status = "okay";
};

&rtc {
	status = "okay";
};

&pinctrl_0 {
	pmic_irq: sm5011-irq {
		nexell,pins = "alive-1";
		nexell,pin-function = <NX_PIN_FUNC0>;
		nexell,pin-pull = <NX_PIN_PULL_NONE>;
		nexell,pin-strength = <NX_PIN_STR0>;
	};

	cfg_wlanhostwake: cfg-wlanhostwake {
		nexell,pins = "alive-3";
		nexell,pin-function = <NX_PIN_FUNC0>;
		nexell,pin-pull = <NX_PIN_PULL_UP>;
		nexell,pin-strength = <NX_PIN_STR0>;
	};
};

&i2c_0 {
	status = "okay";
	#address-cells = <1>;
	#size-cells = <0>;

	nxe1500: nxe1500@33 {
		compatible = "nexell,nxe1500";
		interrupt-parent = <&alive_0>;
		interrupts = <0x5 IRQ_TYPE_EDGE_FALLING>;
		pinctrl-names = "default";
		pinctrl-0 = <&pmic_irq>;
		reg = <0x33>;

		regulators {
			VCC_DCDC0: dcdc1 {
					PMIC_PDATA_INIT( 0,
					"nxe1500_dcdc1",
					600000, 1400000,
					1100000, 1, 0, 0x4)
					regulator-always-on;
					regulator-boot-on;
				};

			VCC_DCDC1: dcdc2 {
					PMIC_PDATA_INIT( 1,
					"nxe1500_dcdc2",
					975000, 1000000,
					1000000, 1, 0, 0x4)
					regulator-always-on;
					regulator-boot-on;
				};

			VCC_DCDC2: dcdc3 {
					PMIC_PDATA_INIT( 2,
					"nxe1500_dcdc3",
					1500000, 1500000,
					1500000, 1, 0, 0xF)
					regulator-always-on;
					regulator-boot-on;
				};

			VCC_DCDC3: dcdc4 {
					PMIC_PDATA_INIT( 3,
					"nxe1500_dcdc4",
					1500000, 1500000,
					1500000, 1, 0, 0xF)
					regulator-always-on;
					regulator-boot-on;
				};

			VCC_LDO0: ldo1 {
					PMIC_PDATA_INIT( 5,
					"nxe1500_ldo1",
					3300000, 3300000,
					3300000, 1, 0, 0x2)
					regulator-boot-on;
				};

			VCC_LDO1: ldo2 {
					PMIC_PDATA_INIT( 6,
					"nxe1500_ldo2",
					1800000, 1800000,
					1800000, 1, 0, 0x3)
					regulator-boot-on;
				};

			VCC_LDO2: ldo3 { PMIC_PDATA_INIT( 7,
					"nxe1500_ldo3",
					3300000, 3300000,
					3300000, 1, 0, 0x2)
					regulator-always-on;
					regulator-boot-on;
				};

			VCC_LDO3: ldo4 {
					PMIC_PDATA_INIT( 8,
					"nxe1500_ldo4",
					1500000, 1500000,
					1500000, 1, 0, 0x3)
					regulator-always-on;
					regulator-boot-on;
				};

			VCC_LDO4: ldo5 {
					PMIC_PDATA_INIT( 9,
					"nxe1500_ldo5",
					1000000, 1000000,
					1000000, 1, 0, 0x4)
					regulator-boot-on;
				};

			VCC_RTC0: ldortc1 {
					PMIC_PDATA_INIT(15,
					"nxe1500_rtc1",
					1700000, 3500000,
					1800000, 1, 1, 0xF)
					regulator-always-on;
					regulator-boot-on;
				};

			VCC_RTC1: ldortc2 {
					PMIC_PDATA_INIT(16,
					"nxe1500_rtc2",
					1000000, 3500000,
					1000000, 1, 1, 0xF)
					regulator-always-on;
					regulator-boot-on;
				};

		}; /* regulators */
	}; /* nxe1500@33 */
}; /* &i2c_0 */


&cpu0 {
	//cpu-supply = <&buck2_reg>;
};

&cpu0_opp_table {
	compatible = "operating-points-v2";
	opp-shared;

	opp-0 {
		opp-hz = /bits/ 64 <100000000>;
		opp-microvolt = <1000000>;
	};
	opp-1 {
		opp-hz = /bits/ 64 <200000000>;
		opp-microvolt = <1000000>;
	};
	opp-2 {
		opp-hz = /bits/ 64 <300000000>;
		opp-microvolt = <1000000>;
	};
	opp-3 {
		opp-hz = /bits/ 64 <400000000>;
		opp-microvolt = <1000000>;
	};
	opp-4 {
		opp-hz = /bits/ 64 <500000000>;
		opp-microvolt = <1000000>;
	};
	opp-5 {
		opp-hz = /bits/ 64 <600000000>;
		opp-microvolt = <1000000>;
	};
	opp-6 {
		opp-hz = /bits/ 64 <700000000>;
		opp-microvolt = <1000000>;
	};
	opp-7 {
		opp-hz = /bits/ 64 <800000000>;
		opp-microvolt = <1000000>;
	};
	opp-8 {
		opp-hz = /bits/ 64 <900000000>;
		opp-microvolt = <1100000>;
	};
	opp-9 {
		opp-hz = /bits/ 64 <1000000000>;
		opp-microvolt = <1100000>;
	};
	opp-10 {
		opp-hz = /bits/ 64 <1100000000>;
		opp-microvolt = <1200000>;
	};
	opp-11 {
		opp-hz = /bits/ 64 <1200000000>;
		opp-microvolt = <1300000>;
	};
	opp-12 {
		opp-hz = /bits/ 64 <1300000000>;
		opp-microvolt = <1300000>;
	};
	opp-13 {
		opp-hz = /bits/ 64 <1400000000>;
		opp-microvolt = <1300000>;
	};

};
